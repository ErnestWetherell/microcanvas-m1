{% extends "base.html" %}

{% block content %}
  <h1>Dashboard</h1>

  {% if current_user.is_authenticated %}
    <p>Welcome back, {{ current_user.email }} ({{ current_user.role }}).</p>
  {% else %}
    <p>You are not logged in. Use one of the demo accounts to explore:</p>
    <ul>
      <li>prof@example.com (instructor)</li>
      <li>ta@example.com (ta)</li>
      <li>student@example.com (student)</li>
    </ul>
  {% endif %}

  <h2>Courses</h2>
  <ul>
    {% for c in courses %}
      <li>
        <a href="{{ url_for('main.course_detail', course_id=c.id) }}">
          {{ c.code }} — {{ c.title }}
        </a>
      </li>
    {% endfor %}
  </ul>

  <h2>Upcoming Tasks (Prototype)</h2>
  {% if upcoming_tasks %}
    <ul>
      {% for t in upcoming_tasks %}
        <li>
          {{ t.title }}
          {% if t.course %}
            ({{ t.course.code }})
          {% endif %}
          {% if t.due_date %}
            — due {{ t.due_date }}
          {% endif %}
          — {{ t.points }} pts
          {% if t.score is not none %}
            — score: {{ t.score }}
          {% else %}
            — not graded
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No tasks yet.</p>
  {% endif %}
{% endblock %}
